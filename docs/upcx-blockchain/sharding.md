---
sidebar_position: 3
---

# Sharding

Sharding is a database scaling technique that involves breaking a larger database into smaller, more manageable pieces called shards. Each shard is a separate database that holds a portion of the overall data set, and these shards can be distributed across multiple servers or clusters. Sharding is often used to improve the performance, availability, and manageability of large-scale databases, particularly in distributed systems.

The main idea behind sharding is to split data horizontally, meaning that each shard contains a subset of the rows in the original database, with the same schema. By doing this, queries can be executed more quickly since they only need to access a smaller subset of the data, and it allows for better load balancing as well.

## Sharding in Blockchain

Sharding in the context of blockchain is a scaling solution aimed at increasing the throughput and efficiency of a blockchain network. It involves splitting the network into smaller, more manageable pieces called shards, each capable of processing transactions and maintaining a subset of the overall ledger independently. This approach allows the network to process multiple transactions simultaneously, thus increasing the network's overall capacity and performance.

In a traditional blockchain, each node (or participant) maintains a complete copy of the ledger and validates all transactions. This design ensures a high level of security and decentralization but can lead to bottlenecks and scalability issues as the network grows and transaction volumes increase.

Sharding addresses these issues by dividing the blockchain into smaller, interconnected sub-chains or shards. Each shard maintains a portion of the overall ledger and is responsible for validating and processing a subset of transactions. This allows the network to execute multiple transactions in parallel, significantly increasing its throughput and efficiency.

One of the advantages of Sharding is that only necessary materials can be queried quickly. Another advantage is that past data that is not used can be stored in the Cloud or on separate hardware to facilitate the smooth operation of the blockchain network.

In blockchain Sharding, not only the data is necessarily divided. For example, Sharding in Ethereum can be seen as a Parallel Network, which is responsible for dividing the blocks that must be processed in the main blockchain and the operations that process the corresponding Shard. In other words, Ethereum also has a segmented Off-Chain for processing the Shard.

It is said that the block generation speed of Ethereum takes more than 13 seconds, but if Sharding is introduced, it will be generated in 2~8 seconds. In Ethereum, blocks are divided into Shards, a Merkel Patricia Tree is created for each Shard, and this Merkel Patricia Tree is registered in the blockchain.

As in the previous version of Ethereum, there is no need for all the miners to process the entire blockchain. The processing speed is improved by distributing the processing and execution among the miners for each shard.

## UPCXâ€™s Sharding

In UPCX, assuming that it takes 1 second for a witness to verify a block and 0.8 seconds for data transfer, the time required for verification can be significantly reduced by applying sharding to UPCX.

If a block is divided into 11 shards and each shard is processed by a separate witness, the time required to verify a block is 1/11+0.8, resulting in a verification time of approximately 0.9 seconds.

# Casper

CASPER is an algorithm designed to transition Ethereum's consensus algorithm from PoW to PoS.

Early Ethereum was designed based on PoW, where nodes had to decrypt certain ciphers before adding new transactions to the blockchain. while PoW enhances decentralization and security, it has the problem of huge energy consumption and low processing power.

To solve this problem, the CASPER algorithm was devised.

CASPER algorithm works as follows:

1. Assume that there are n side chains derived from the main blockchain. If the main blockchain is PoW-based, then the side chains are PoS-based.
2. Miners competing to generate blocks bet (staking) their Ethereum assets (ETH) on the PoS-based side chain instead of expending energy to decrypt the PoW-based blockchain as in the past.
3. Miners then generate blocks on the side chain, and the nodes in the sidechain proceed to verify the blocks.
4. The side chain stores the latest 100 blocks' information of the main blockchain and the Merkle Tree information of the previous blocks.
5. The side chain proceeds with the verification of the 12 blocks generated by the miners simultaneously, and when more than 2/3 of the miners approve a block, the block is transferred to the main blockchain as a block approved by the side chain.
6. The main blockchain selects the blocks recommended by the majority of the side chains out of the blocks transferred from the side chains and stores them in the main blockchain.
7. If none of the blocks get more than a majority recommendation, the block generation will be modified based on the PoW algorithm.

Three problems exist with the CASPER algorithm.

- If there is no majority consensus, the blockchain will revert back to PoW.
- There is the problem of long-range attacks, where blocks generated by more than 2/3 votes not to fit the security of PoW are transferred to the main blockchain, and then re-voting occurs in the side chain, changing the block content.
- The most significant problem is that a new Merkle Tree structure may be generated on the side chain that is completely different from the current blockchain flow.

To solve these problems, UPCX implements a customized CASPER algorithm in the following manner:

- The UPCX consensus algorithm is a hybrid of the BFT and DPoS consensus algorithms so a majority agreement among the delegated witnesses is rarely possible. Nevertheless, if a consensus cannot be reached, we will assume that there is a problem with the block in question.
- In a side chain, after one block is generated, no changes can be made to the base Merkle Tree until the next block's Merkle Tree arrives.
- Even if another Merkle Tree is momentarily generated, the new Merkle Tree generated by the main blockchain is shared with the side chain so that block generation can proceed again based on the latest Merkle Tree.

CASPER algorithm in UPCX is parallelized only between a certain block in the main blockchain and the next block generated after it. As in other blockchains, persistent parallel processing does not change the Merkle Tree between the main blockchain and the side chain.

However, only some additional time (about 50 ms per block) is incurred because the Merkle Tree must be updated in the side chain for each block generation cycle of the main blockchain.
